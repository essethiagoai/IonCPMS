#!/bin/bash

echo "üß™ Testando sincroniza√ß√£o final do mapa com coordenadas..."
echo ""

# Verificar se o servidor est√° rodando
echo "üîç Verificando se o servidor est√° rodando..."
if curl -s http://localhost:5176/ > /dev/null; then
    echo "‚úÖ Servidor Operator UI est√° rodando em http://localhost:5176/"
else
    echo "‚ùå Servidor Operator UI n√£o est√° rodando"
    echo "üí° Execute: cd citrineos-operator-ui && npm run dev"
    exit 1
fi

echo ""
echo "üéØ Teste de Sincroniza√ß√£o do Mapa:"
echo ""
echo "1. Acesse: http://localhost:5176/"
echo "2. Fa√ßa login com:"
echo "   - Email: admin@citrineos.com"
echo "   - Senha: CitrineOS!"
echo ""
echo "3. V√° para: Locations ‚Üí Create Location"
echo ""
echo "4. Teste sincroniza√ß√£o Campos ‚Üí Mapa:"
echo "   - Digite: -23.5505 no campo Latitude"
echo "   - Digite: -46.6333 no campo Longitude"
echo "   - Clique fora dos campos"
echo "   - ‚úÖ Verifique se o mapa mostra um marcador em S√£o Paulo"
echo "   - ‚úÖ Verifique se o mapa centraliza na localiza√ß√£o"
echo ""
echo "5. Teste sincroniza√ß√£o Mapa ‚Üí Campos:"
echo "   - Clique em um ponto diferente no mapa"
echo "   - ‚úÖ Verifique se os campos s√£o atualizados"
echo "   - ‚úÖ Verifique se os valores correspondem ao ponto clicado"
echo ""
echo "6. Teste com valores do Rio de Janeiro:"
echo "   - Digite: -22.9068 no campo Latitude"
echo "   - Digite: -43.1729 no campo Longitude"
echo "   - Clique fora dos campos"
echo "   - ‚úÖ Verifique se o mapa mostra um marcador no Rio de Janeiro"
echo ""
echo "7. Teste com valores de Bras√≠lia:"
echo "   - Digite: -15.7801 no campo Latitude"
echo "   - Digite: -47.9292 no campo Longitude"
echo "   - Clique fora dos campos"
echo "   - ‚úÖ Verifique se o mapa mostra um marcador em Bras√≠lia"
echo ""
echo "üîß Corre√ß√£o Aplicada:"
echo "   - Criado GeoPoint com new GeoPoint(latitude, longitude)"
echo "   - Sincroniza√ß√£o bidirecional: Campos ‚Üî Mapa"
echo "   - Marcador no mapa reflete coordenadas dos campos"
echo "   - Clique no mapa atualiza os campos"
echo ""
echo "üìç Valores de teste:"
echo "   - S√£o Paulo: Lat: -23.5505, Lng: -46.6333"
echo "   - Rio de Janeiro: Lat: -22.9068, Lng: -43.1729"
echo "   - Bras√≠lia: Lat: -15.7801, Lng: -47.9292"
echo ""
echo "üéâ Se o mapa mostrar marcadores nas localiza√ß√µes corretas, a sincroniza√ß√£o funcionou!"
echo ""
echo "üí° Esta corre√ß√£o resolve:"
echo "   - Mapa n√£o refletindo coordenadas dos campos"
echo "   - Sincroniza√ß√£o bidirecional"
echo "   - Marcadores no mapa"
echo "   - Centraliza√ß√£o do mapa nas coordenadas"
