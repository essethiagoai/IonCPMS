#!/bin/bash

echo "üîç Debugando problema dos campos de latitude e longitude..."
echo ""

# Verificar se o servidor est√° rodando
echo "üîç Verificando se o servidor est√° rodando..."
if curl -s http://localhost:5176/ > /dev/null; then
    echo "‚úÖ Servidor Operator UI est√° rodando em http://localhost:5176/"
else
    echo "‚ùå Servidor Operator UI n√£o est√° rodando"
    echo "üí° Execute: cd citrineos-operator-ui && npm run dev"
    exit 1
fi

echo ""
echo "üéØ Teste de Debug dos Campos de Coordenadas:"
echo ""
echo "1. Acesse: http://localhost:5176/"
echo "2. Fa√ßa login com:"
echo "   - Email: admin@citrineos.com"
echo "   - Senha: CitrineOS!"
echo ""
echo "3. V√° para: Locations ‚Üí Create Location"
echo ""
echo "4. Abra o DevTools (F12) e v√° para a aba Console"
echo ""
echo "5. Teste os campos passo a passo:"
echo ""
echo "   üìç TESTE 1 - Campo Latitude:"
echo "   - Digite: -23.5505"
echo "   - Observe no console se h√° erros"
echo "   - Clique fora do campo"
echo "   - Verifique se o valor permanece: -23.5505"
echo ""
echo "   üìç TESTE 2 - Campo Longitude:"
echo "   - Digite: -46.6333"
echo "   - Observe no console se h√° erros"
echo "   - Clique fora do campo"
echo "   - Verifique se o valor permanece: -46.6333"
echo ""
echo "   üìç TESTE 3 - Campo Vazio:"
echo "   - Deixe o campo vazio"
echo "   - Clique fora do campo"
echo "   - Verifique se n√£o aparece 0"
echo ""
echo "   üìç TESTE 4 - Valor 0:"
echo "   - Digite: 0"
echo "   - Clique fora do campo"
echo "   - Verifique se o valor 0 √© mantido (n√£o deve ser alterado)"
echo ""
echo "6. Se ainda houver problemas, verifique:"
echo "   - Console do navegador para erros JavaScript"
echo "   - Network tab para requisi√ß√µes falhando"
echo "   - Se o servidor est√° rodando corretamente"
echo ""
echo "üîß Corre√ß√µes aplicadas:"
echo "   - Removido onBlur handler problem√°tico"
echo "   - Adicionado valida√ß√£o lat !== 0 e lng !== 0"
echo "   - Mantido precision={6} e step={0.000001}"
echo "   - Simplificado a l√≥gica de onChange"
echo ""
echo "üìç Coordenadas de teste:"
echo "   - S√£o Paulo: Lat: -23.5505, Lng: -46.6333"
echo "   - Rio de Janeiro: Lat: -22.9068, Lng: -43.1729"
echo "   - Bras√≠lia: Lat: -15.7801, Lng: -47.9292"
echo ""
echo "üí° Se o problema persistir, me informe:"
echo "   - Qual valor voc√™ digitou"
echo "   - O que aconteceu quando clicou fora"
echo "   - Se h√° erros no console do navegador"
