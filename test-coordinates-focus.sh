#!/bin/bash

echo "üß™ Testando corre√ß√£o dos campos de latitude e longitude..."
echo ""

# Verificar se o servidor est√° rodando
echo "üîç Verificando se o servidor est√° rodando..."
if curl -s http://localhost:5176/ > /dev/null; then
    echo "‚úÖ Servidor Operator UI est√° rodando em http://localhost:5176/"
else
    echo "‚ùå Servidor Operator UI n√£o est√° rodando"
    echo "üí° Execute: cd citrineos-operator-ui && npm run dev"
    exit 1
fi

echo ""
echo "üéØ Teste de Foco dos Campos de Coordenadas:"
echo ""
echo "1. Acesse: http://localhost:5176/"
echo "2. Fa√ßa login com:"
echo "   - Email: admin@citrineos.com"
echo "   - Senha: CitrineOS!"
echo ""
echo "3. V√° para: Locations ‚Üí Create Location ou Edit Location"
echo ""
echo "4. Teste os campos de coordenadas:"
echo "   - Digite uma latitude v√°lida: -23.5505"
echo "   - Clique fora do campo (perde o foco)"
echo "   - Verifique se o valor permanece: -23.5505"
echo ""
echo "   - Digite uma longitude v√°lida: -46.6333"
echo "   - Clique fora do campo (perde o foco)"
echo "   - Verifique se o valor permanece: -46.6333"
echo ""
echo "5. Teste casos especiais:"
echo "   - Deixe o campo vazio e clique fora"
echo "   - Digite 0 e clique fora"
echo "   - Digite texto inv√°lido e clique fora"
echo ""
echo "6. Verifique se:"
echo "   ‚úÖ Valores v√°lidos s√£o mantidos ao perder foco"
echo "   ‚úÖ Valores inv√°lidos n√£o s√£o convertidos para 0"
echo   "   ‚úÖ Campos vazios n√£o s√£o preenchidos com 0"
echo "   ‚úÖ Precis√£o de 6 casas decimais √© mantida"
echo ""
echo "üîß Corre√ß√µes aplicadas:"
echo "   - Adicionado onBlur handler para valida√ß√£o"
echo "   - Adicionado precision={6} para 6 casas decimais"
echo "   - Adicionado step={0.000001} para incrementos precisos"
echo "   - Valida√ß√£o para evitar valores 0 inv√°lidos"
echo ""
echo "üìç Coordenadas de teste:"
echo "   - S√£o Paulo: Lat: -23.5505, Lng: -46.6333"
echo "   - Rio de Janeiro: Lat: -22.9068, Lng: -43.1729"
echo "   - Bras√≠lia: Lat: -15.7801, Lng: -47.9292"
echo ""
echo "üéâ Se os valores n√£o mudarem para 0 ao perder foco, a corre√ß√£o funcionou!"
