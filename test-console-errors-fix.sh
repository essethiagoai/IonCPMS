#!/bin/bash

echo "üß™ Testando corre√ß√£o dos erros do console..."
echo ""

# Verificar se o servidor est√° rodando
echo "üîç Verificando se o servidor est√° rodando..."
if curl -s http://localhost:5176/ > /dev/null; then
    echo "‚úÖ Servidor Operator UI est√° rodando em http://localhost:5176/"
else
    echo "‚ùå Servidor Operator UI n√£o est√° rodando"
    echo "üí° Execute: cd citrineos-operator-ui && npm run dev"
    exit 1
fi

echo ""
echo "üéØ Teste da Corre√ß√£o dos Erros do Console:"
echo ""
echo "1. Acesse: http://localhost:5176/"
echo "2. Fa√ßa login com:"
echo "   - Email: admin@citrineos.com"
echo "   - Senha: CitrineOS!"
echo ""
echo "3. Abra o DevTools (F12) e v√° para a aba Console"
echo ""
echo "4. Navegue pela aplica√ß√£o e verifique se:"
echo ""
echo "   ‚úÖ N√ÉO aparece mais: 'GET http://localhost:5176/config.js net::ERR_ABORTED 404'"
echo "   ‚úÖ N√ÉO aparece mais: 'Warning: Each child in a list should have a unique key prop'"
echo "   ‚úÖ N√ÉO aparece mais: 'O mapa √© inicializado sem um ID de mapa v√°lido'"
echo ""
echo "5. Teste espec√≠fico - V√° para: Locations ‚Üí [Qualquer localiza√ß√£o] ‚Üí View Details"
echo ""
echo "6. Verifique se:"
echo "   - ‚úÖ A p√°gina carrega sem erros"
echo "   - ‚úÖ As facilities s√£o exibidas corretamente (se houver)"
echo "   - ‚úÖ N√ÉO h√° warnings sobre 'key' prop no console"
echo ""
echo "7. Teste o mapa:"
echo "   - V√° para: Locations ‚Üí Map"
echo "   - ‚úÖ Mapa carrega sem erros"
echo "   - ‚úÖ Marcadores aparecem (se houver localiza√ß√µes)"
echo ""
echo "üîß Corre√ß√µes Aplicadas:"
echo "   - Criado arquivo public/config.js para resolver erro 404"
echo "   - Adicionado key prop no map de facilities"
echo "   - Configura√ß√µes din√¢micas funcionando"
echo "   - Mapa com IDs v√°lidos"
echo ""
echo "üìç Arquivos Modificados:"
echo "   - public/config.js (criado)"
echo "   - src/pages/locations/detail/location.detail.card.tsx (corrigido)"
echo ""
echo "üéâ Se n√£o houver mais erros no console, as corre√ß√µes funcionaram!"
echo ""
echo "üí° Estas corre√ß√µes resolvem:"
echo "   - Erro 404 do config.js"
echo "   - Warning de key prop no React"
echo "   - Configura√ß√µes din√¢micas"
echo "   - Melhor experi√™ncia de desenvolvimento"
